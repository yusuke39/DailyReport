<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.example.DailyReport.mapper.CompanyMapper">

    <!-- 企業担当者と企業一覧の全件検索 -->
    <select id="findAllCompanyMemberAndCompanies" resultMap="CompanyResult">
        select c.id c_id, c.name c_name, c.kana c_kana, c.remarks c_remarks, ccm.companies_id ccm_companies_id,
        ccm.company_members_id ccm_company_members_id, cm.id cm_id, cm.name cm_name, cm.kana cm_kana, cm.email cm_email, cm.password cm_password
        from companies c
        left outer join companies_company_members ccm on ccm.companies_id = c.id
        left outer join company_members cm on cm.id = ccm.company_members_id;
    </select>

    <resultMap id="CompanyResult" type="com.example.DailyReport.domain.Companies">
        <id property="id" column="c_id"/>
        <result property="name" column="c_name"/>
        <result property="kana" column="c_kana"/>
        <result property="remarks" column="c_remarks"/>
        <collection property="companyMembersList" ofType="com.example.DailyReport.domain.CompanyMembers">
            <result property="id" column="cm_id"/>
            <result property="name" column="cm_name"/>
            <result property="kana" column="cm_kana"/>
            <result property="email" column="cm_email"/>
            <result property="password" column="cm_password"/>
        </collection>
    </resultMap>

</mapper>